{% extends "home/base.html" %}

{% load static %}

{% block title %}
Home - My Company
{% endblock %}

{% block content %}
<div class="background-container">
    <div class="container text-center mt-5">
        <div class="row">
            <div class="col-12">
                <img src="{% static 'images/logo/avant-log-transparent.png' %}" class="img-fluid logo-image logo-fade-in">
            </div>
            <div class="col-12 mt-3">
                <h1 class="company-name"><a href="{% url 'home:about' %}" class="company-name-link">Avant</a></h1>
            </div>
            <div class="col-12 mt-3">
                <h2 class="tagline"><a href="{% url 'home:about' %}" class="tagline-link">Next Evolution Of UV Coatings</a></h2>
            </div>
        </div>
    </div>
</div>


<!-- New video background section -->
<div class="video-background-container">
    <video autoplay loop muted class="video-background">
        <source src="{% static 'videos/backgroundvideo_002.mp4' %}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <div class="video-content">
        <h2 class="tagline">See Our Products in Action</h2>
        <a href="{% url 'home:index' %}" class="btn btn-primary rounded-pill learn-more-btn">Learn More</a>
    </div>
</div>

<!-- Grid section -->
<div class="grid-section">
    <div class="grid-item">
        <img src="{% static 'images/backgrounds/bk stienway no bg.jpeg' %}" alt="Image 1">
        <div class="overlay">
            <a href="{% url 'home:learn-more-1' %}" class="learn-more-overlay-btn">Learn More</a>
        </div>
    </div>
    <div class="grid-item">
        <img src="{% static 'images/backgrounds/piano blackcp.jpeg' %}" alt="Image 2">
        <div class="overlay">
            <a href="{% url 'home:learn-more-2' %}" class="learn-more-overlay-btn">Learn More</a>
        </div>
    </div>
    <div class="grid-item">
        <img src="{% static 'images/backgrounds/training.jpg' %}" alt="Image 3">
        <div class="overlay">
            <a href="{% url 'training:training' %}" class="learn-more-overlay-btn">Learn More</a>
        </div>
    </div>
    <div class="grid-item">
        <img src="{% static 'images/backgrounds/handheldlightblack.jpeg' %}" alt="Image 4">
        <div class="overlay">
            <a href="{% url 'home:learn-more-4' %}" class="learn-more-overlay-btn">Learn More</a>
        </div>
    </div>
</div>

<!-- Carousel Section -->
<div class="carousel-container mt-5">
    <div class="carousel-track" id="carousel-track">
        {% for product in products %}
            <div class="card mb-4">
                <img src="{{ product.images.first.image.url }}" class="card-img-top">
                <div class="overlay">
                    <a href="{% url 'products:product_detail' product.id %}" class="view-button">Shop</a>
                </div>
            </div>
        {% endfor %}
    </div>
</div>

<!-- Include the JavaScript directly in the HTML -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const track = document.getElementById('carousel-track');
        const cards = Array.from(track.children);
        const cardWidth = cards[0].offsetWidth;
        const trackWidth = track.offsetWidth;
        const cardsNeeded = Math.ceil(trackWidth / cardWidth) * 2; // Ensures double fill

        for (let i = 0; i < cardsNeeded; i++) {
            const clone = cards[i % cards.length].cloneNode(true);
            track.appendChild(clone);
        }
    });
</script>



{% endblock %}
